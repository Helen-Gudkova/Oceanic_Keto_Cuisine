{% extends 'base.html' %}
{% load static %}
{% block content %}
<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="{% static 'css/style_recipes_detail_detail.css' %}">
</head>

<div class="recipe-container">
  <div class="image-column">
    <div class="bg-image" href="{% url 'recipe_detail' recipe_title=recipe.title %}" class="type bg-image" style="background-image: url('{% static 'images/'%}{{ recipe.title }}.jpg');"></div>
  </div>
  <div class="content-column">
    <h3 class="site-title2">{{ recipe.title }}ü•ëüêü</h3>
    <p class="site-title3">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: {{ recipe.views_count }}</p>
    <div class="info">
      <div>
        <h3 class="site-title2">–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:</h3>
        <p class="site-title3">{{ recipe.ingredients }}</p>
      </div>
      <div>
        <h3 class="site-title2">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:</h3>
        <p class="site-title3">{{ recipe.instructions}}</p>
      </div>
      <div>
        <h3 class="site-title2">–ö–∞–ª–æ—Ä–∏–∏:</h3>
        <p class="site-title3">{{ recipe.calories}}</p>
      </div>
    </div>
  </div>
</div>

<div class="review-section">
  {% if error_message %}
    <p class="site-title3">{{ error_message }}</p>
  {% endif %}

  {% if user.is_authenticated %}
    <!-- –§–æ—Ä–º–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –æ—Ç–∑—ã–≤–∞ -->
    <div class="review-form">
      <h3 class="site-title2">–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</h3>
      <form method="post" action="{% url 'create_review' recipe.id %}">
        {% csrf_token %}
        <label class="site-title3">–û—Ü–µ–Ω–∫–∞:</label>
        <input type="number" name="rating" min="1" max="5" required>
        <label class="site-title3">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
        <textarea name="comment"></textarea>
        <button type="submit" class="site-title3">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      </form>
    </div>
  {% endif %}

  <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ—Ç–∑—ã–≤–æ–≤ -->
  <h3 class="site-title2">–û—Ç–∑—ã–≤—ã:</h3>
  <div class="reviews">
    {% for review in reviews %}
    <div class="review">
      <p class="site-title3">–û—Ü–µ–Ω–∫–∞: {{ review.rating }}</p>
      <p class="site-title3">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: {{ review.comment }}</p>
      <p class="site-title3">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {{ review.user.username }}</p>
      <p class="site-title3">–î–∞—Ç–∞: {{ review.created_at }}</p>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}











